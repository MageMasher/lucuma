<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Lucuma</title>
    <script src="assets/platform.min.js"></script>
    <script src="assets/lucuma+tests.js"></script>
    <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css">
    <link rel="stylesheet" href="assets/prism.css">
    <link rel="stylesheet" href="assets/screen.css">
  </head>
  <body data-spy="scroll" data-target="#navbar">

    <a href="https://github.com/jeluard/lucuma">
      <img id="ribbon" src="http://aral.github.com/fork-me-on-github-retina-ribbons/right-dusk-blue@2x.png" alt="Fork me on GitHub">
    </a>
    <iframe id="github-button" src="http://ghbtns.com/github-btn.html?user=jeluard&repo=lucuma&type=watch&count=true"
allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20"></iframe>
    <nav id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#"><strong>LUCUMA</strong></a>
      </div>
      <div class="collapse navbar-collapse navbar-ex1-collapse">
        <ul class="nav navbar-nav">
          <li class="active"><a href="#introduction">Introduction</a></li>
          <li><a href="#installation">Installation</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Usage <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="#custom-element-definition">Custom Element definition</a></li>
              <li><a href="#custom-element-lifecycle">Lifecycle</a></li>
              <li><a href="#custom-element-content">Content</a></li>
              <li><a href="#custom-element-style">Style</a></li>
              <li><a href="#custom-element-extend">Extending</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="#range-with-threshold">Range with threshold</a></li>
              <li><a href="#overlay">Overlay</a></li>
              <li><a href="#flipbox">Flipbox</a></li>
              <li><a href="#todomvc">TodoMVC</a></li>
            </ul>
          </li>
          <li><a href="#tests">Tests</a></li>
          <li><a href="#native-browser-support">Native browser support</a></li>
          <li><a href="#links">Links</a></li>
        </ul>
      </div>
    </nav>
    
    <main class="container">
      <section id="introduction" class="main-section">
          <p>A Web Components library for <a href="https://github.com/clojure/clojurescript">ClojureScript</a>.</p>
          <p>At it's core lucuma helps with creating your own html element type (Web Component).</p>
          <p>
            Lucuma builds on top of <a href="https://dvcs.w3.org/hg/webcomponents/raw-file/tip/spec/custom/index.html">Custom Elements</a>, <a href="https://dvcs.w3.org/hg/webcomponents/raw-file/tip/spec/shadow/index.html">Shadow DOM</a> and <a href="https://dvcs.w3.org/hg/webcomponents/raw-file/tip/spec/templates/index.html">HTML Templates</a> and is conceptually similar to <a href="http://www.polymer-project.org/">polymer</a>, <a href="http://www.x-tags.org/">x-tags</a> or dart's <a href="https://www.dartlang.org/articles/web-ui/">web-ui</a>.
          </p>
  
          <div class="disclaimer">
            <h4>Disclaimer</h4>
            <p>
              Technologies involved are pre-alpha (specs are not frozen yet). Use cautiously!
            </p>
          </div>
      </section>
    
      <section id="installation" class="main-section">
        <h1>Installation</h1>
        <p>Lucuma is available in <a href="https://clojars.org/lucuma">Clojars</a>. Add <strong>[lucuma "0.1.0"]</strong> dependency to your <strong>project.clj</strong>.</p>
        <div class="info">
          <h4>Browser support</h4>
          <p>Unless you target browsers with <a href="#native-browser-support">native</a> custom elements support you will need to use a polyfill.</p>
          <p>
            <a href="http://www.polymer-project.org/getting-the-code.html">Polymer</a> is one of the stronger alternative.
            Use it by adding <code class="language-markup">&lt;script src="platform.min.js"&gt;&lt;/script&gt;</code> to your html head (check <a href="http://www.polymer-project.org/build/">build reports</a> for browser support).
            </p>
        </div>
      </section>

      <section id="usage" class="main-section">
          <h1>Usage</h1>

          <section>
            <h2 id="custom-element-definition">Custom Element definition</h2>
            <p>
              
            </p>
            <div class="example-live">
              <ex-hello></ex-hello>
            </div>
            <pre class="example-markup">
              <code class="language-markup">
  &lt;ex-hello&gt;&lt;/ex-hello&gt;
              </code>
            </pre>
            <pre class="example-cljs">
              <code class="language-clojure">
  ;;First define your new element
  (use 'lucuma.custom-elements)
  (def proto (create-prototype {:content "Hello world!"})
  
  ;;then register it
  (register "ex-hello" proto)
  
  ;;alternatively you can use the defwebcomponent macro

  (use 'lucuma)
  (defwebcomponent ex-hello
    :content "Hello World!")
  
  (register ex-hello)
              </code>
            </pre>
  
            <p>
             Custom Elements can be manipulated programmatically as any other regular element.
            </p>
            <pre class="example-cljs">
              <code class="language-clojure">
  ;;append a my-element node to body
  (.appendChild js/document.body (.createElement js/document "my-element"))
  
  ;;or using hiccup syntax and dommy
  (dommy/append! (dommy/sel1 :body) [:my-element])
              </code>
            </pre>
          </section>

          <section>
            <h2 id="custom-element-lifecycle">Lifecycle</h2>
            <p>You can hook function using following keys:</p>
            <ul>
              <li><strong>created-fn</strong> will be called when the element is created via <strong>document.createElement</strong></li>
              <li><strong>entered-view-fn</strong> will be called each time after the element entered the view</li>
              <li><strong>left-view-fn</strong> will be called each time after the element left the view</li>
            </ul>
            <p>All functions receive as unique argument the targeted element.</p>
            <div class="example-live">
              <script>
              var e;
              function createLifecycle() {
                e = document.createElement('ex-lifecycle');
                document.getElementById('btn-append').disabled = null;
                document.getElementById('btn-remove').disabled = "disabled";
              }
              function appendLifecycle() {
                document.body.appendChild(e);
                document.getElementById('btn-append').disabled = "disabled";
                document.getElementById('btn-remove').disabled = null;
              }
              function removeLifecycle() {
                document.body.removeChild(e);
                document.getElementById('btn-append').disabled = null;
                document.getElementById('btn-remove').disabled = "disabled";
              }
              </script>
              <div class="btn-group" style="float: left;">
                <button type="button" class="btn btn-default" onclick="createLifecycle()">Create</button>
                <button id="btn-append" type="button" class="btn btn-success" onclick="appendLifecycle()" disabled="disabled">Append</button>
                <button id="btn-remove" type="button" class="btn btn-danger" onclick="removeLifecycle()" disabled="disabled">Remove</button>
              </div>
              <ul id="lifecycle-events" style="height: 40px; width: 200px; overflow-y: auto;"></ul>
            </div>
            <pre class="example-cljs">
              <code class="language-clojure">
  (defwebcomponent ex-lifecycle
    :created-fn #(prepend! (sel1 :#lifecycle-events) [:li "element created"])
    :entered-view-fn #(prepend! (sel1 :#lifecycle-events) [:li "element entered view"])
    :left-view-fn #(prepend! (sel1 :#lifecycle-events) [:li "element left view"]))
              </code>
            </pre>
          </section>

          <section>
            <h2 id="custom-element-content">Content</h2>
            <p>
              Content is first rendered with the <strong>render-content</strong> multimethod then appended via the <strong>append!</strong> multimethod, both applied in a row. If content is a function it will be evaluated at element creation time.
              Out of the box <strong>render-content</strong> has implementations for String and HTMLTemplateElement and <strong>append!</strong> implementations for String, any HTMLElement and DocumentFragment.
              
              HTML template can be directly used as content:
            </p>
            <div class="example-live">
              <template id="template-id">
                Hello template!
              </template>
              <ex-content-template></ex-content-template>
            </div>
            <pre class="example-cljs">
              <code class="language-clojure">
  (defwebcomponent ex-content-template
    :content #(dommy.macros/sel1 :#template-id))
              </code>
            </pre>
            <p>
              Add support to hiccup style vector by providing a custom render-content implementation:
            </p>
            <div class="example-live">
              <ex-content-hiccup></ex-content-hiccup>
            </div>
            <pre class="example-cljs">
              <code class="language-clojure">
  ;; Use dommy.macros/node to render hiccup style vector as a DocumentFragment.
  
  (derive PersistentVector ::vector)
  (defmethod render-content ::vector [v] (node v))
  
  (defwebcomponent ex-content-hiccup
    :content [:div "Hello hiccup!"])
              </code>
            </pre>
          </section>

          <section>
            <h2 id="custom-element-style">Style</h2>
            <p>
              Style is first rendered with the <strong>render-style</strong> multimethod then appended via the <strong>append!</strong> multimethod, both applied in a row. If style is a function it will be evaluated at element creation time.
Out of the box <strong>render-style</strong> has implementations for String.
            </p>
            <div class="example-live">
              <ex-style></ex-style>
            </div>
            <pre class="example-cljs">
              <code class="language-clojure">
  (defwebcomponent ex-style
    :content "<div>Hello styled!</div>"
    :style "div {background: green;}")
              </code>
            </pre>
          </section>

          <section>
            <h2 id="custom-element-extend">Extension</h2>
            <p>
              Existing element can be extended to inherit capacity from another element (via prototype inheritence).
            </p>
            <div class="example-live">
              <button is="ex-extend"></button>
            </div>
            <pre class="example-markup">
              <code class="language-markup">
  &lt;button is="ex-extend"&gt;&lt;/button&gt;
              </code>
            </pre>
            <pre class="example-cljs">
              <code class="language-clojure">
   (defwebcomponent ex-extend
    :base-type "button" ;; or js/HTMLButtonElement
    :style "button {background: red;}")
              </code>
            </pre>
            <p><strong>base-type</strong> value can be an element name or a concrete type extending HTMLElement. It defaults to HTMLElement.</p>
          </section>

      </section>

      <section id="examples" class="main-section">
        <h1>Examples</h1>
        <section>
          <h2 id="range-with-threshold">Range with threshold</h2>
          <em>TODO</em>
        </section>
        <section>
          <h2 id="overlay">Overlay</h2>
          <p>Adpated from bee's <a href="https://github.com/blossom/bee/blob/master/lib/components/overlay.dart">overlay</a></p>
          <em>TODO</em>
        </section>
        <section>
          <h2 id="flipbox">Flipbox</h2>
          <p>Adpated from brick's <a href="https://github.com/x-tag/flipbox">flipbox</a></p>
          <em>TODO</em>
        </section>
        <section>
          <h2 id="todomvc">TodoMVC</h2>
          <p>Lucuma based implementation of <a href="http://todomvc.com/">TodoMVC</a></p>
          <em>TODO</em>
        </section>
      </section>

      <section id="tests" class="main-section" >
        <h1>Tests</h1>
        <script>
        function run_all_tests() {
          document.getElementById('tests-results').innerHTML = '';
          lucuma.test.browser_runner.run_all_tests();
        }
        </script>
        <button type="button" class="btn btn-primary" onclick="run_all_tests()">Run tests</button>
        <div id="tests-results"></div>
      </section>
    
      <section id="native-browser-support" class="main-section">
        <h1>Native browser support</h1>
        Browsers are <a href="http://jonrimmer.github.io/are-we-componentized-yet/">implementing</a> Web Components technologies furiously those days. Still you have to enable their support manually.

        <h3>Chrome Canary</h3>
        Check chrome progress <a href="http://www.chromestatus.com/features">here</a>.

        Enable native Custom Elements support via the <a href="chrome://flags/#enable-experimental-web-platform-features">enable-experimental-web-platform-features</a> flag.
      </section>

      <section id="links" class="main-section">
        <h1>Links</h1>

        <h3>Introdution</h3>
        <ul>
          <li><a href="http://www.w3.org/TR/components-intro/">http://www.w3.org/TR/components-intro/</a></li>
          <li><a href="http://webcomponentsshift.com">webcomponentsshift.com</a></li>
          <li><a href="https://speakerdeck.com/stopsatgreen/web-components-getting-started">Getting started</a></li>
        </ul>

        <h3>Web Components library</h3>
        <ul>
          <li><a href="http://mozilla.github.io/brick/">Brick</a></li>
          <li><a href="http://registry.x-tags.org/">X-Tags</a></li>
          <li><a href="http://www.polymer-project.org/docs/elements/">Polymer</a></li>
          <li><a href="http://customelements.io/">CustomElements.io</a></li>
        </ul>

        <h3>To go further</h3>
        <ul>
          <li><a href="http://www.html5rocks.com/en/tutorials/webcomponents/customelements/">Custom Elements</a></li>
          <li><a href="http://www.html5rocks.com/en/tutorials/webcomponents/template/">Template</a></li>
          <li><a href="http://www.html5rocks.com/en/tutorials/webcomponents/shadowdom/">Shadow DOM 101</a></li>
          <li><a href="http://www.html5rocks.com/en/tutorials/webcomponents/shadowdom-201/">Shadow DOM 201</a></li>
          <li><a href="http://www.html5rocks.com/en/tutorials/webcomponents/shadowdom-301/">Shadow DOM 301</a></li>
        </ul>

      </section>

      <script>
        document.addEventListener('DOMContentLoaded', function() {
          lucuma.examples.register_all();
        });
      </script>
    </main>

    <footer>
      Copyright © 2013 Julien Eluard - Distributed under the <a href="http://www.eclipse.org/legal/epl-v10.html">Eclipse Public License</a>, the same as Clojure.
    </footer>

    <script src="assets/prism.js"></script>
    <script src="assets/prism.clojure.js"></script>
  </body>
</html>